syntax = "proto3";
package neoshowcase.protobuf;
option go_package = "github.com/traPtitech/neoshowcase/pkg/interface/grpc/pb";

import "google/protobuf/empty.proto";

enum BuildType {
  IMAGE = 0;
  STATIC = 1;
}

message Application {
  string id = 1;
  string repository_url = 2;
  string branch_name = 3;
  BuildType build_type = 4;
}

message GetApplicationsResponse {
  repeated Application applications = 1;
}

message CreateApplicationRequest {
  string repository_url = 1;
  string branch_name = 2;
  BuildType build_type = 3;
}

message GetApplicationRequest {
  string id = 1;
}

message DeleteApplicationRequest {
  string id = 1;
}

service ApplicationService {
  rpc GetApplications(google.protobuf.Empty) returns (GetApplicationsResponse);
  rpc CreateApplication(CreateApplicationRequest) returns (Application);
  rpc GetApplication(GetApplicationRequest) returns (Application);
  rpc DeleteApplication(DeleteApplicationRequest) returns (google.protobuf.Empty);
}
